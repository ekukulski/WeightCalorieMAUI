<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:WeightCalorieMAUI"
             x:Class="WeightCalorieMAUI.MainPage"
             x:DataType="local:MainPage"
             BackgroundColor="LightCyan">

    <VerticalStackLayout Padding="10" Spacing="15">

        <!-- ===================== -->
        <!-- TOP ACTION BUTTON ROW -->
        <!-- ===================== -->
        <Grid ColumnDefinitions="*,*,*" ColumnSpacing="20"
              HorizontalOptions="Center">

            <Button Grid.Column="0"
                    Text="Add Record"
                    BackgroundColor="Bisque"
                    TextColor="Black"
                    FontAttributes="Bold"
                    CornerRadius="12"
                    Padding="16,10"
                    Clicked="OnAddRecordClicked" />

            <Button Grid.Column="1"
                    Text="Edit Record"
                    BackgroundColor="Bisque"
                    TextColor="Black"
                    FontAttributes="Bold"
                    CornerRadius="12"
                    Padding="16,10"
                    Clicked="OnEditRecordClicked" />

            <Button Grid.Column="2"
                    Text="Delete Record"
                    BackgroundColor="Bisque"
                    TextColor="Black"
                    FontAttributes="Bold"
                    CornerRadius="12"
                    Padding="16,10"
                    Clicked="OnDeleteRecordClicked" />
        </Grid>

        <!-- ======= -->
        <!-- CHART -->
        <!-- ======= -->
        <Button Text="Chart"
                BackgroundColor="CadetBlue"
                TextColor="Black"
                CornerRadius="12"
                Padding="16,10"
                HorizontalOptions="Center"
                Clicked="OnChartClicked" />

        <!-- ======= -->
        <!-- EXIT -->
        <!-- ======= -->
        <Button Text="Exit"
                BackgroundColor="IndianRed"
                TextColor="Black"
                CornerRadius="12"
                Padding="16,10"
                HorizontalOptions="Center"
                Clicked="OnExitClicked" />

        <!-- ===================== -->
        <!-- AVERAGE DISPLAY -->
        <!-- ===================== -->
        <HorizontalStackLayout Spacing="20" Padding="10,0">
            <Label Text="Average Weight Loss:"
                   FontAttributes="Bold" />
            <Label x:Name="AvgWeightLossLabel" />
        </HorizontalStackLayout>

        <HorizontalStackLayout Spacing="20" Padding="10,0">
            <Label Text="Average Calories:"
                   FontAttributes="Bold" />
            <Label x:Name="AvgCaloriesLabel" />
        </HorizontalStackLayout>

        <!-- ===================== -->
        <!-- DATA LIST -->
        <!-- ===================== -->
        <ScrollView>
            <CollectionView x:Name="DataView"
                            ItemsSource="{Binding DataItems}"
                            SelectionMode="Single"
                            SelectionChanged="OnRecordSelected">

                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="local:WeightCalorieData">
                        <Grid ColumnDefinitions="*,*,*"
                              Padding="8">

                            <Label Grid.Column="0"
                                   Text="{Binding Date}" />

                            <Label Grid.Column="1"
                                   Text="{Binding Weight}"
                                   HorizontalTextAlignment="Center" />

                            <Label Grid.Column="2"
                                   Text="{Binding Calorie}"
                                   HorizontalTextAlignment="End" />
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>

            </CollectionView>
        </ScrollView>

        <!-- ===================== -->
        <!-- ADD RECORD PANEL -->
        <!-- ===================== -->
        <Frame x:Name="AddRecordPanel"
               IsVisible="False"
               Padding="12"
               BackgroundColor="White"
               BorderColor="Gray"
               CornerRadius="10">

            <VerticalStackLayout Spacing="10">

                <DatePicker x:Name="DatePicker" />

                <Entry x:Name="WeightEntry"
                       Placeholder="Weight"
                       TextChanged="OnEntryTextChanged" />

                <Entry x:Name="CaloriesEntry"
                       Placeholder="Calories"
                       TextChanged="OnEntryTextChanged" />

                <HorizontalStackLayout Spacing="12"
                                       HorizontalOptions="Center">

                    <Button Text="Save"
                            BackgroundColor="Bisque"
                            TextColor="Black"
                            Clicked="OnSaveRecordClicked" />

                    <Button Text="Cancel"
                            BackgroundColor="LightGray"
                            TextColor="Black"
                            Clicked="OnCancelClicked" />

                </HorizontalStackLayout>
            </VerticalStackLayout>
        </Frame>

    </VerticalStackLayout>
</ContentPage>
